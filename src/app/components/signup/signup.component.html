<app-header></app-header>
<div class="container" style="width: 35%; margin-top: 60px">
  <div class="flex-grow-1 card p-5 pb-3 border-0">
    <mat-icon class="back-btn-register" *ngIf="step !== 3" (click)="prevStep()">arrow_back_ios</mat-icon>
    <div class="text-center mb-3">
      <div class="logo radius">LOGO</div>
      <br>
      <h5>{{'Sign up for a new account' | translate}}</h5>
    </div>
    <div *ngIf="step === 1">
      <form [formGroup]="signUpReferralForm" (ngSubmit)="onSubmit()" autocomplete="off">
        <mat-form-field appearance="outline" class="w-100 mb-2" [hideRequiredMarker]="true">
          <mat-label>{{'Referral Code' | translate}}</mat-label>
          <input matInput placeholder="{{'Referral Code' | translate}}" type="text" name="referral"
                 [formControlName]="'referer'" required>
          <mat-error>Please enter your referral code</mat-error>
        </mat-form-field>
        <div role="alert" style="color: #ff5722; margin: 10px 0">
          {{error}}
        </div>
        <button mat-raised-button color="primary" type="submit" [disabled]="!signUpReferralForm.valid || loading"
                class="w-100 p-4">
          <span>Sign up</span>
        </button>
      </form>
      <div class="position-relative mt-4">
        <div class="line"></div>
        <div class="text-on-line">{{'or' | translate}}</div>
      </div>
      <br>
      <form #f="ngForm" [formGroup]="signUpWaitListForm" (ngSubmit)="onSubmitSignUpWaitList()" autocomplete="off">
        <mat-form-field appearance="outline" class="w-100 mb-2" [hideRequiredMarker]="true">
          <mat-label>{{'E-mail Address' | translate}}</mat-label>
          <input matInput placeholder="{{'Referral Code' | translate}}" type="text" name="email"
                 [formControlName]="'email'" required>
          <mat-error>{{'Please enter your email address' | translate}}</mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline" class="w-100 mb-2">
          <ngx-mat-intl-tel-input
            [enablePlaceholder]="true"
            [enableSearch]="true"
            [preferredCountries]="['ir']"
            name="phone"
            (countryChanged)="countryChangedEvent($event)"
            [formControlName]="'mobile'"></ngx-mat-intl-tel-input>
        </mat-form-field>
        <div role="alert" style="color: #ff5722; margin: 10px 0">
          {{errorWaitList}}
        </div>
        <button mat-raised-button color="primary" type="submit" [disabled]="!signUpWaitListForm.valid || loading"
                class="w-100 p-4">
          <span>{{'Join the wait list' | translate}}</span>
        </button>
        <br>
        <div class="text-center mt-3" [routerLink]="['/login']"><b class="link text-decoration-none">
          {{'Have an account ? Log in' | translate}}</b></div>
      </form>
    </div>
    <div *ngIf="step === 2">
      <mat-label>{{'To verify your E-mail address and phone number, please enter codes send to you:' | translate}}</mat-label>
      <br>
      <br>
      <form #f="ngForm" [formGroup]="signUpVerifyFormEmail" autocomplete="off">
        <div class="d-flex">
          <mat-form-field appearance="outline" class="w-50 mb-2" [hideRequiredMarker]="true">
            <mat-label>{{'E-mail' | translate}}</mat-label>
            <input matInput placeholder="{{'email' | translate}}" type="text" name="text"
                   [formControlName]="'email'" required>
          </mat-form-field>&nbsp;
          <mat-form-field appearance="outline" class="w-25 mb-2" [hideRequiredMarker]="true">
            <mat-label>{{'email Code' | translate}}</mat-label>
            <input matInput placeholder="{{'email Code' | translate}}" type="text" name="text"
                   [formControlName]="'verificationCode'" required>
          </mat-form-field>
          <div *ngIf="!resendAbleEmail" class="w-25 mb-2 vertical-middle">
            {{countDownEmail}}: 00
          </div>
          <mat-label class="w-25 mb-2 vertical-middle" *ngIf="resendAbleEmail" (click)="resendCodeEmail()">
            {{'Resend' | translate}}
          </mat-label>
        </div>
      </form>
      <form #f="ngForm" [formGroup]="signUpVerifyFormMobile" autocomplete="off">
        <div class="d-flex">
          <mat-form-field appearance="outline" class="w-50 mb-2" [hideRequiredMarker]="true">
            <mat-label>{{'Phone' | translate}}</mat-label>
            <input matInput placeholder="{{'phone' | translate}}" type="text" name="text"
                   [formControlName]="'mobile'" required>
          </mat-form-field>&nbsp;
          <mat-form-field appearance="outline" class="w-25 mb-2" [hideRequiredMarker]="true">
            <mat-label>{{'Phone' | translate}}</mat-label>
            <input matInput placeholder="{{'phone Code' | translate}}" type="text" name="text"
                   [formControlName]="'phoneCode'" required>
          </mat-form-field>
          <div *ngIf="!resendAblePhone" class="w-25 mb-2 vertical-middle">
            {{countDownPhone}}: 00
          </div>
          <mat-label class="w-25 mb-2 vertical-middle" *ngIf="resendAblePhone" (click)="resendCodePhone()">
            {{'Resend' | translate}}
          </mat-label>
        </div>
      </form>
      <button mat-raised-button color="primary" type="submit"
              [disabled]="!signUpVerifyFormMobile.valid || !signUpVerifyFormEmail.valid || loading"
              class="w-100 p-4" (click)="onSubmitSignUpVerify()">
        <span>{{'Verify' | translate}}</span>
      </button>
    </div>

    <div *ngIf="step === 3">
      <div class="d-block text-center">
        <mat-icon>check</mat-icon>
        <h5>{{'Congratulations!' | translate}}</h5><br>
        <mat-label>
          {{'You\'ve been successfully joined our waiting list. We will notify you soon.' | translate}}
        </mat-label>
      </div>
    </div>


    <div class="loading" *ngIf="loading$ | async">
    </div>
  </div>
</div>

<app-footer></app-footer>
