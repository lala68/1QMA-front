<br>
<div style="display: ruby-text;">
  <mat-spinner *ngIf="loading" [diameter]="30"></mat-spinner>
</div>
<div *ngIf="!loading && questionStep == 1">
  <mat-tab-group mat-stretch-tabs="false" mat-align-tabs="start" class="tab-group-trivia"
                 [(selectedIndex)]="selectedTabIndexParent" (selectedTabChange)="questionOrGame()">
    <mat-tab label="Questions">
      <div class="card border-0">
        <div class="w-100 d-flex">
          <mat-card class="shadow-none p-2" style="width: 100%">
            <mat-card-header>
              <div>
                <mat-tab-group mat-stretch-tabs="false" mat-align-tabs="start" class="tab-group-library"
                               [(selectedIndex)]="selectedTabIndex" (selectedTabChange)="changeQuestions()">
                  <mat-tab label="All Questions">
                  </mat-tab>
                  <mat-tab label="My Questions">
                  </mat-tab>
                  <mat-tab label="Bookmarked">
                  </mat-tab>
                </mat-tab-group>
              </div>
            </mat-card-header>
            <br>
            <!--  private-->
            <div class="d-flex overflow-scroll">
              <div class="m-2 d-inline-flex shadow-none cursor-pointer p-3"
                   (click)="selectCat('')"
                   [class]="{'mat-card-pref-selected': isSelected(''), 'mat-card-pref': !isSelected('')}">
                <div class="text-center w-100" style="padding-top: 8px">
                  <mat-label class="font-size-14 weight-600">{{ 'all categories' }}</mat-label>
                </div>
              </div>
              <div *ngFor="let cat of generalService?.clientInit?.categories"
                   class="m-2 d-inline-flex shadow-none cursor-pointer p-3"
                   (click)="selectCat(cat)"
                   [class]="{'mat-card-pref-selected': isSelected(cat), 'mat-card-pref': !isSelected(cat)}">
                <div class="text-start">
                  <img [src]="'https://api.staging.1qma.games/' + cat?.icon" width="35">
                  <mat-label>{{ cat?.name }}</mat-label>
                </div>
              </div>
            </div>
            <mat-card-content *ngIf="selectedTabIndex == 0">
              <div style="display: ruby-text;">
                <mat-spinner *ngIf="loadingContent" [diameter]="30"></mat-spinner>
              </div>
              <div class="position-relative">
                <div class="border-0 pt-3 ps-4 font-size-14 weight-600" *ngIf="library?.total">
                  {{library?.total}} {{'Questions' | translate}}
                </div>
                <button [matMenuTriggerFor]="menuSortQuestion" *ngIf="library?.total"
                        class="font-size-14 weight-600 position-absolute end-10 top-0 border-0 bg-transparent d-flex align-items-center"
                        style="width: fit-content">
                  {{selectedSortOption == 'highest' ? 'highest rate' : selectedSortOption == 'lowest' ? 'lowest rate' : selectedSortOption }}
                  <i class="bi bi-chevron-down color-black" style="padding: 10px"></i>
                </button>
                <mat-menu #menuSortQuestion="matMenu">
                  <div mat-menu-item class="p-2 border-bottom" (click)="onSelect('oldest')">
                    <mat-label>oldest</mat-label>
                  </div>
                  <div mat-menu-item class="p-2 border-bottom" (click)="onSelect('newest')">
                    <mat-label>newest</mat-label>
                  </div>
                  <div mat-menu-item class="p-2 border-bottom" (click)="onSelect('highest')">
                    <mat-label>highest rate</mat-label>
                  </div>
                  <div mat-menu-item class="p-2" (click)="onSelect('lowest')">
                    <mat-label>lowest rate</mat-label>
                  </div>
                </mat-menu>
              </div>
              <br>

              <div *ngFor="let item of libraryQuestions" class="gray-card p-4 m-2 d-inline-block" style="width: 48%">
                <div class="d-flex white-card position-relative m-2">
                  <img class="avatar-bordered"
                       [src]="item?.user?.profilePicture ? item?.user?.profilePicture?.startsWith('http') ? item?.user?.profilePicture : configService.url(item?.user?.profilePicture) : 'assets/images/frame.png'"
                       width="42" height="42">
                  <mat-label class="font-size-13 weight-500"
                             style="margin: auto 10px">{{item?.user?.firstName}} {{item?.user?.lastName}}</mat-label>
                  <mat-label class="font-size-12 weight-500 position-absolute" style="right: 10px; margin: 10px auto">
                    {{item?.createdAt | daysAgo}}
                  </mat-label>
                </div>
                <br>
                <div class="font-size-14 weight-700" style="min-height: 80px">
                  {{item?.question}}
                </div>
                <br>
                <div *ngIf="item?.score" class="d-inline-flex justify-content-between align-items-center m-1">
                  <div class="white-card p-1 d-flex align-items-center" style="width: fit-content">
                    <img src="assets/images/score.png"
                         width="16">
                    <mat-label class="font-size-12 weight-600"
                               style="margin: auto 5px">{{item?.score | parsInt}}
                      <mat-label class="font-size-12 weight-600 text-gray">Score</mat-label>
                    </mat-label>
                  </div>
                </div>
                <div class="d-inline-flex justify-content-between align-items-center m-1">
                  <div class="white-card p-1 d-flex align-items-center" style="width: fit-content">
                    <img src="assets/images/plays.png"
                         width="16">
                    <mat-label class="font-size-12 weight-600"
                               style="margin: auto 5px">{{item?.plays | parsInt}}
                      <mat-label class="font-size-12 weight-600 text-gray">Plays</mat-label>
                    </mat-label>
                  </div>
                </div>
                <div class="d-inline-flex justify-content-between align-items-center m-1">
                  <div class="white-card p-1 d-flex align-items-center" style="width: fit-content">
                    <img src="assets/images/answer-questions.png"
                         width="16">
                    <mat-label class="font-size-12 weight-600"
                               style="margin: auto 5px">{{item?.answers | parsInt}}
                      <mat-label class="font-size-12 weight-600 text-gray">Answers</mat-label>
                    </mat-label>
                  </div>
                </div>
                <div class="d-inline-flex justify-content-between align-items-center m-1">
                  <div class="white-card p-1 d-flex align-items-center" style="width: fit-content">
                    <img
                      [src]="configService.url(item?.category?.icon)"
                      width="16">
                    <mat-label class="font-size-12 weight-600"
                               style="margin: auto 5px">{{item?.category?.name}}</mat-label>
                  </div>
                </div>

                <br>
                <mat-card-actions class="position-relative d-flex align-items-center pb-0 pt-3">
                  <button mat-raised-button (click)="gotoAnswer(item)"
                          class="answer-button position-absolute end-10 bottom-0">{{'Answer' | translate}}
                  </button>
                  <div class="position-absolute bottom-0" style="display: contents">
                    <svg *ngIf="item?.liked" (click)="addLike(item)" width="17" height="17" viewBox="0 0 25 25"
                         fill="#0B6FEA"
                         xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M8.10205 18.5106L11.2021 20.9106C11.6021 21.3106 12.5021 21.5106 13.1021 21.5106H16.9021C18.1021 21.5106 19.4021 20.6106 19.7021 19.4106L22.1021 12.1106C22.6021 10.7106 21.7021 9.51061 20.2021 9.51061H16.2021C15.6021 9.51061 15.1021 9.01061 15.2021 8.31061L15.7021 5.11061C15.9021 4.21061 15.3021 3.21061 14.4021 2.91061C13.6021 2.61061 12.6021 3.01061 12.2021 3.61061L8.10205 9.71061"
                        stroke="#0B6FEA" stroke-width="1.5" stroke-miterlimit="10"/>
                      <path
                        d="M3.00195 18.5105V8.71055C3.00195 7.31055 3.60195 6.81055 5.00195 6.81055H6.00195C7.40195 6.81055 8.00195 7.31055 8.00195 8.71055V18.5105C8.00195 19.9105 7.40195 20.4105 6.00195 20.4105H5.00195C3.60195 20.4105 3.00195 19.9105 3.00195 18.5105Z"
                        stroke="#0B6FEA" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <svg *ngIf="!item?.liked" (click)="addLike(item)" width="17" height="17" viewBox="0 0 25 25"
                         fill="none"
                         xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M8.10205 18.5106L11.2021 20.9106C11.6021 21.3106 12.5021 21.5106 13.1021 21.5106H16.9021C18.1021 21.5106 19.4021 20.6106 19.7021 19.4106L22.1021 12.1106C22.6021 10.7106 21.7021 9.51061 20.2021 9.51061H16.2021C15.6021 9.51061 15.1021 9.01061 15.2021 8.31061L15.7021 5.11061C15.9021 4.21061 15.3021 3.21061 14.4021 2.91061C13.6021 2.61061 12.6021 3.01061 12.2021 3.61061L8.10205 9.71061"
                        stroke="#292D32" stroke-width="1.5" stroke-miterlimit="10"/>
                      <path
                        d="M3.00195 18.5105V8.71055C3.00195 7.31055 3.60195 6.81055 5.00195 6.81055H6.00195C7.40195 6.81055 8.00195 7.31055 8.00195 8.71055V18.5105C8.00195 19.9105 7.40195 20.4105 6.00195 20.4105H5.00195C3.60195 20.4105 3.00195 19.9105 3.00195 18.5105Z"
                        stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <mat-label [class]="{'link-text': item?.liked}">{{item?.likes}}</mat-label>
                    &nbsp;&nbsp;&nbsp;
                    <svg (click)="disLike(item)" *ngIf="item?.disliked" width="17" height="17" viewBox="0 0 25 25"
                         fill="#0B6FEA"
                         xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M17.4211 5.81055L14.3211 3.41055C13.9211 3.01055 13.0211 2.81055 12.4211 2.81055H8.6211C7.4211 2.81055 6.1211 3.71055 5.8211 4.91055L3.4211 12.2105C2.9211 13.6105 3.8211 14.8105 5.3211 14.8105H9.3211C9.9211 14.8105 10.4211 15.3105 10.3211 16.0105L9.8211 19.2105C9.6211 20.1105 10.2211 21.1105 11.1211 21.4105C11.9211 21.7105 12.9211 21.3105 13.3211 20.7105L17.4211 14.6105"
                        stroke="#0B6FEA" stroke-width="1.5" stroke-miterlimit="10"/>
                      <path
                        d="M22.521 5.81016V15.6102C22.521 17.0102 21.921 17.5102 20.521 17.5102H19.521C18.121 17.5102 17.521 17.0102 17.521 15.6102V5.81016C17.521 4.41016 18.121 3.91016 19.521 3.91016H20.521C21.921 3.91016 22.521 4.41016 22.521 5.81016Z"
                        stroke="#0B6FEA" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <svg (click)="disLike(item)" *ngIf="!item?.disliked" width="17" height="17" viewBox="0 0 25 25"
                         fill="none"
                         xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M17.4211 5.81055L14.3211 3.41055C13.9211 3.01055 13.0211 2.81055 12.4211 2.81055H8.6211C7.4211 2.81055 6.1211 3.71055 5.8211 4.91055L3.4211 12.2105C2.9211 13.6105 3.8211 14.8105 5.3211 14.8105H9.3211C9.9211 14.8105 10.4211 15.3105 10.3211 16.0105L9.8211 19.2105C9.6211 20.1105 10.2211 21.1105 11.1211 21.4105C11.9211 21.7105 12.9211 21.3105 13.3211 20.7105L17.4211 14.6105"
                        stroke="#292D32" stroke-width="1.5" stroke-miterlimit="10"/>
                      <path
                        d="M22.521 5.81016V15.6102C22.521 17.0102 21.921 17.5102 20.521 17.5102H19.521C18.121 17.5102 17.521 17.0102 17.521 15.6102V5.81016C17.521 4.41016 18.121 3.91016 19.521 3.91016H20.521C21.921 3.91016 22.521 4.41016 22.521 5.81016Z"
                        stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <mat-label [class]="{'link-text': item?.disliked}">{{item?.dislikes}}</mat-label>
                    &nbsp;&nbsp;&nbsp;
                    <div class="d-inline-flex">
                      <!--                      <star-rating [starType]="'svg'" [rating]="item?.avgRate" [readOnly]="true"></star-rating>-->
                      <ng-template #t let-fill="fill">
                        <i class="bi-star-fill">
                          @if (fill > 0) {
                          <i class="bi-star-fill filled" [style.width.%]="fill"></i>
                          }
                        </i>
                      </ng-template>

                      <ngb-rating [(rate)]="item.avgRate" [starTemplate]="t" [readonly]="true" [max]="5"/>
                    </div>
                    <div class="d-inline-flex text-gray">
                      <mat-label *ngIf="item?.avgRate">{{item?.avgRate | number}}</mat-label>
                      <mat-label *ngIf="item?.answers">({{item?.answers}})</mat-label>
                    </div>
                    &nbsp;&nbsp;&nbsp;
                    <svg (click)="addBookmark(item)" *ngIf="!item?.bookmarked" width="25" height="25"
                         viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M14.8477 11.4648H9.84766" stroke="#828282" stroke-width="1.2" stroke-miterlimit="10"
                            stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M12.3477 9.0249V14.0249" stroke="#828282" stroke-width="1.2" stroke-miterlimit="10"
                            stroke-linecap="round" stroke-linejoin="round"/>
                      <path
                        d="M17.168 2.81494H7.52797C5.39797 2.81494 3.66797 4.55494 3.66797 6.67494V20.7649C3.66797 22.5649 4.95797 23.3249 6.53797 22.4549L11.418 19.7449C11.938 19.4549 12.778 19.4549 13.288 19.7449L18.168 22.4549C19.748 23.3349 21.038 22.5749 21.038 20.7649V6.67494C21.028 4.55494 19.298 2.81494 17.168 2.81494Z"
                        stroke="#828282" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>

                    <svg (click)="removeBookmark(item)" *ngIf="item?.bookmarked" width="25" height="25"
                         viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M17.2188 2.81494H7.57875C5.44875 2.81494 3.71875 4.55494 3.71875 6.67494V20.7649C3.71875 22.5649 5.00875 23.3249 6.58875 22.4549L11.4688 19.7449C11.9888 19.4549 12.8287 19.4549 13.3387 19.7449L18.2188 22.4549C19.7987 23.3349 21.0888 22.5749 21.0888 20.7649V6.67494C21.0788 4.55494 19.3488 2.81494 17.2188 2.81494ZM14.8988 12.2149H9.89875C9.48875 12.2149 9.14875 11.8749 9.14875 11.4649C9.14875 11.0549 9.48875 10.7149 9.89875 10.7149H14.8988C15.3088 10.7149 15.6488 11.0549 15.6488 11.4649C15.6488 11.8749 15.3088 12.2149 14.8988 12.2149Z"
                        fill="#2C2523"/>
                    </svg>
                  </div>
                </mat-card-actions>
              </div>
              <div style="margin: 20px auto; text-align: center" *ngIf="libraryQuestions?.length > 0">
                <button mat-stroked-button color="primary" type="submit" *ngIf="!loadingMore && !noMoreItems"
                        class="p-4s ms-2 blue-button" (click)="showMore()"
                        style="min-width: 150px; border: 1px solid #0B6FEA">
                  <span>{{'More' | translate}}</span>
                </button>
                <mat-spinner style="margin: 0 auto; display: block; text-align: center" *ngIf="loadingMore"
                             [diameter]="20"></mat-spinner>
              </div>
            </mat-card-content>

            <!--  public-->
            <mat-card-content *ngIf="selectedTabIndex == 1">
              <div style="display: ruby-text;">
                <mat-spinner *ngIf="loadingContent" [diameter]="30"></mat-spinner>
              </div>
              <div class="position-relative">
                <div class="border-0 pt-4 ps-4 font-size-14 weight-600" *ngIf="library?.total">
                  {{library?.total}} {{'Questions' | translate}}
                </div>
                <button [matMenuTriggerFor]="menuSortQuestion" *ngIf="library?.total"
                        class="font-size-14 weight-600 position-absolute end-10 top-0 border-0 bg-transparent d-flex align-items-center"
                        style="width: fit-content">
                  {{selectedSortOption == 'highest' ? 'highest rate' : selectedSortOption == 'lowest' ? 'lowest rate' : selectedSortOption }}
                  <i class="bi bi-chevron-down color-black" style="padding: 10px"></i>
                </button>
                <mat-menu #menuSortQuestion="matMenu">
                  <div mat-menu-item class="p-2 border-bottom" (click)="onSelect('oldest')">
                    <mat-label>oldest</mat-label>
                  </div>
                  <div mat-menu-item class="p-2 border-bottom" (click)="onSelect('newest')">
                    <mat-label>newest</mat-label>
                  </div>
                  <div mat-menu-item class="p-2 border-bottom" (click)="onSelect('highest')">
                    <mat-label>highest</mat-label>
                  </div>
                  <div mat-menu-item class="p-2" (click)="onSelect('lowest')">
                    <mat-label>lowest</mat-label>
                  </div>
                </mat-menu>
              </div>
              <br>
              <div *ngFor="let item of libraryQuestions" class="gray-card p-4 m-2 d-inline-block" style="width: 48%">
                <div class="d-flex white-card position-relative m-2">
                  <img class="avatar-bordered"
                       [src]="item?.user?.profilePicture ? item?.user?.profilePicture?.startsWith('http') ? item?.user?.profilePicture : configService.url(item?.user?.profilePicture) : 'assets/images/frame.png'"
                       width="42" height="42">
                  <mat-label class="font-size-13 weight-500"
                             style="margin: auto 10px">{{item?.user?.firstName}} {{item?.user?.lastName}}</mat-label>
                  <mat-label class="font-size-12 weight-500 position-absolute" style="right: 10px; margin: 10px auto">
                    {{item?.createdAt | daysAgo}}
                  </mat-label>
                </div>
                <br>
                <div class="font-size-14 weight-700" style="min-height: 80px">
                  {{item?.question}}
                </div>
                <br>
                <div class="d-inline-flex">
                  <div class="white-card p-1 d-flex align-items-center" style="width: fit-content">
                    <img
                      [src]="configService.url(item.category?.icon)"
                      width="16">
                    <mat-label class="font-size-12 weight-600"
                               style="margin: auto 5px">{{item?.category?.name}}</mat-label>
                  </div>
                  &nbsp;&nbsp;
                  <div *ngIf="item?.score" class="white-card p-1 d-flex align-items-center" style="width: fit-content">
                    <img src="assets/images/score.png" width="16">
                    <mat-label class="font-size-12 weight-600" style="margin: auto 10px">{{item?.score | parsInt}} <span
                      class="text-gray">{{'Score' | translate}}</span>
                    </mat-label>
                  </div>
                </div>
                <br>
                <br>
                <mat-card-actions class="position-relative d-flex align-items-center pb-0 pt-3">
                  <button mat-raised-button (click)="gotoAnswer(item)"
                          class="answer-button position-absolute end-10 bottom-0">{{'Answer' | translate}}
                  </button>
                  <div class="position-absolute bottom-0" style="display: contents">
                    <svg *ngIf="item?.liked" (click)="addLike(item)" width="17" height="17" viewBox="0 0 25 25"
                         fill="#0B6FEA"
                         xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M8.10205 18.5106L11.2021 20.9106C11.6021 21.3106 12.5021 21.5106 13.1021 21.5106H16.9021C18.1021 21.5106 19.4021 20.6106 19.7021 19.4106L22.1021 12.1106C22.6021 10.7106 21.7021 9.51061 20.2021 9.51061H16.2021C15.6021 9.51061 15.1021 9.01061 15.2021 8.31061L15.7021 5.11061C15.9021 4.21061 15.3021 3.21061 14.4021 2.91061C13.6021 2.61061 12.6021 3.01061 12.2021 3.61061L8.10205 9.71061"
                        stroke="#0B6FEA" stroke-width="1.5" stroke-miterlimit="10"/>
                      <path
                        d="M3.00195 18.5105V8.71055C3.00195 7.31055 3.60195 6.81055 5.00195 6.81055H6.00195C7.40195 6.81055 8.00195 7.31055 8.00195 8.71055V18.5105C8.00195 19.9105 7.40195 20.4105 6.00195 20.4105H5.00195C3.60195 20.4105 3.00195 19.9105 3.00195 18.5105Z"
                        stroke="#0B6FEA" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <svg *ngIf="!item?.liked" (click)="addLike(item)" width="17" height="17" viewBox="0 0 25 25"
                         fill="none"
                         xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M8.10205 18.5106L11.2021 20.9106C11.6021 21.3106 12.5021 21.5106 13.1021 21.5106H16.9021C18.1021 21.5106 19.4021 20.6106 19.7021 19.4106L22.1021 12.1106C22.6021 10.7106 21.7021 9.51061 20.2021 9.51061H16.2021C15.6021 9.51061 15.1021 9.01061 15.2021 8.31061L15.7021 5.11061C15.9021 4.21061 15.3021 3.21061 14.4021 2.91061C13.6021 2.61061 12.6021 3.01061 12.2021 3.61061L8.10205 9.71061"
                        stroke="#292D32" stroke-width="1.5" stroke-miterlimit="10"/>
                      <path
                        d="M3.00195 18.5105V8.71055C3.00195 7.31055 3.60195 6.81055 5.00195 6.81055H6.00195C7.40195 6.81055 8.00195 7.31055 8.00195 8.71055V18.5105C8.00195 19.9105 7.40195 20.4105 6.00195 20.4105H5.00195C3.60195 20.4105 3.00195 19.9105 3.00195 18.5105Z"
                        stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <mat-label [class]="{'link-text': item?.liked}">{{item?.likes}}</mat-label>
                    &nbsp;&nbsp;&nbsp;
                    <svg (click)="disLike(item)" *ngIf="item?.disliked" width="17" height="17" viewBox="0 0 25 25"
                         fill="#0B6FEA"
                         xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M17.4211 5.81055L14.3211 3.41055C13.9211 3.01055 13.0211 2.81055 12.4211 2.81055H8.6211C7.4211 2.81055 6.1211 3.71055 5.8211 4.91055L3.4211 12.2105C2.9211 13.6105 3.8211 14.8105 5.3211 14.8105H9.3211C9.9211 14.8105 10.4211 15.3105 10.3211 16.0105L9.8211 19.2105C9.6211 20.1105 10.2211 21.1105 11.1211 21.4105C11.9211 21.7105 12.9211 21.3105 13.3211 20.7105L17.4211 14.6105"
                        stroke="#0B6FEA" stroke-width="1.5" stroke-miterlimit="10"/>
                      <path
                        d="M22.521 5.81016V15.6102C22.521 17.0102 21.921 17.5102 20.521 17.5102H19.521C18.121 17.5102 17.521 17.0102 17.521 15.6102V5.81016C17.521 4.41016 18.121 3.91016 19.521 3.91016H20.521C21.921 3.91016 22.521 4.41016 22.521 5.81016Z"
                        stroke="#0B6FEA" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <svg (click)="disLike(item)" *ngIf="!item?.disliked" width="17" height="17" viewBox="0 0 25 25"
                         fill="none"
                         xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M17.4211 5.81055L14.3211 3.41055C13.9211 3.01055 13.0211 2.81055 12.4211 2.81055H8.6211C7.4211 2.81055 6.1211 3.71055 5.8211 4.91055L3.4211 12.2105C2.9211 13.6105 3.8211 14.8105 5.3211 14.8105H9.3211C9.9211 14.8105 10.4211 15.3105 10.3211 16.0105L9.8211 19.2105C9.6211 20.1105 10.2211 21.1105 11.1211 21.4105C11.9211 21.7105 12.9211 21.3105 13.3211 20.7105L17.4211 14.6105"
                        stroke="#292D32" stroke-width="1.5" stroke-miterlimit="10"/>
                      <path
                        d="M22.521 5.81016V15.6102C22.521 17.0102 21.921 17.5102 20.521 17.5102H19.521C18.121 17.5102 17.521 17.0102 17.521 15.6102V5.81016C17.521 4.41016 18.121 3.91016 19.521 3.91016H20.521C21.921 3.91016 22.521 4.41016 22.521 5.81016Z"
                        stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <mat-label [class]="{'link-text': item?.disliked}">{{item?.dislikes}}</mat-label>
                    &nbsp;&nbsp;&nbsp;
                    <div class="d-inline-flex">
                      <!--                      <star-rating show-half-stars="true" [starType]="'svg'" [readOnly]="true" [rating]="item?.avgRate"></star-rating>-->
                      <ng-template #t let-fill="fill">
                        <i class="bi-star-fill">
                          @if (fill > 0) {
                          <i class="bi-star-fill filled" [style.width.%]="fill"></i>
                          }
                        </i>
                      </ng-template>

                      <ngb-rating [(rate)]="item.avgRate" [starTemplate]="t" [readonly]="true" [max]="5"/>
                    </div>
                    <div class="d-inline-flex text-gray">
                      <mat-label *ngIf="item?.avgRate">{{item?.avgRate | number}}</mat-label>
                      <mat-label *ngIf="item?.answers">({{item?.answers}})</mat-label>
                    </div>
                    &nbsp;&nbsp;&nbsp;
                    <svg (click)="addBookmark(item)" *ngIf="!item?.bookmarked" width="25" height="25"
                         viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M14.8477 11.4648H9.84766" stroke="#828282" stroke-width="1.2" stroke-miterlimit="10"
                            stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M12.3477 9.0249V14.0249" stroke="#828282" stroke-width="1.2" stroke-miterlimit="10"
                            stroke-linecap="round" stroke-linejoin="round"/>
                      <path
                        d="M17.168 2.81494H7.52797C5.39797 2.81494 3.66797 4.55494 3.66797 6.67494V20.7649C3.66797 22.5649 4.95797 23.3249 6.53797 22.4549L11.418 19.7449C11.938 19.4549 12.778 19.4549 13.288 19.7449L18.168 22.4549C19.748 23.3349 21.038 22.5749 21.038 20.7649V6.67494C21.028 4.55494 19.298 2.81494 17.168 2.81494Z"
                        stroke="#828282" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>

                    <svg (click)="removeBookmark(item)" *ngIf="item?.bookmarked" width="25" height="25"
                         viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M17.2188 2.81494H7.57875C5.44875 2.81494 3.71875 4.55494 3.71875 6.67494V20.7649C3.71875 22.5649 5.00875 23.3249 6.58875 22.4549L11.4688 19.7449C11.9888 19.4549 12.8287 19.4549 13.3387 19.7449L18.2188 22.4549C19.7987 23.3349 21.0888 22.5749 21.0888 20.7649V6.67494C21.0788 4.55494 19.3488 2.81494 17.2188 2.81494ZM14.8988 12.2149H9.89875C9.48875 12.2149 9.14875 11.8749 9.14875 11.4649C9.14875 11.0549 9.48875 10.7149 9.89875 10.7149H14.8988C15.3088 10.7149 15.6488 11.0549 15.6488 11.4649C15.6488 11.8749 15.3088 12.2149 14.8988 12.2149Z"
                        fill="#2C2523"/>
                    </svg>
                  </div>
                </mat-card-actions>
              </div>
              <div style="margin: 20px auto; text-align: center" *ngIf="libraryQuestions?.length > 0">
                <button mat-stroked-button color="primary" type="submit" *ngIf="!loadingMore && !noMoreItems"
                        class="p-4s ms-2 blue-button" (click)="showMore()"
                        style="min-width: 150px; border: 1px solid #0B6FEA">
                  <span>{{'More' | translate}}</span>
                </button>
                <mat-spinner style="margin: 0 auto; display: block; text-align: center" *ngIf="loadingMore"
                             [diameter]="20"></mat-spinner>
              </div>
            </mat-card-content>

            <!--  bookmark-->
            <mat-card-content *ngIf="selectedTabIndex == 2">
              <div style="display: ruby-text;">
                <mat-spinner *ngIf="loadingContent" [diameter]="30"></mat-spinner>
              </div>
              <div class="position-relative">
                <div class="border-0 pt-4 ps-4 font-size-14 weight-600" *ngIf="library?.total">
                  {{library?.total}} {{'Questions' | translate}}
                </div>
                <button [matMenuTriggerFor]="menuSortQuestion"
                        class="font-size-14 weight-600 position-absolute end-10 top-0 border-0 bg-transparent d-flex align-items-center"
                        style="width: fit-content">
                  {{selectedSortOption == 'highest' ? 'highest rate' : selectedSortOption == 'lowest' ? 'lowest rate' : selectedSortOption }}
                  <i class="bi bi-chevron-down color-black" style="padding: 10px"></i>
                </button>
                <mat-menu #menuSortQuestion="matMenu">
                  <div mat-menu-item class="p-2 border-bottom" (click)="onSelect('oldest')">
                    <mat-label>oldest</mat-label>
                  </div>
                  <div mat-menu-item class="p-2 border-bottom" (click)="onSelect('newest')">
                    <mat-label>newest</mat-label>
                  </div>
                  <div mat-menu-item class="p-2 border-bottom" (click)="onSelect('highest')">
                    <mat-label>highest</mat-label>
                  </div>
                  <div mat-menu-item class="p-2" (click)="onSelect('lowest')">
                    <mat-label>lowest</mat-label>
                  </div>
                </mat-menu>
              </div>
              <br>
              <div *ngFor="let item of libraryQuestions" class="gray-card p-4 m-2 d-inline-block" style="width: 48%">
                <div class="d-flex white-card position-relative m-2">
                  <img class="avatar-bordered"
                       [src]="item?.user?.profilePicture ? item?.user?.profilePicture?.startsWith('http') ? item?.user?.profilePicture : configService.url(item?.user?.profilePicture) : 'assets/images/frame.png'"
                       width="42" height="42">
                  <mat-label class="font-size-13 weight-500"
                             style="margin: auto 10px">{{item?.user?.firstName}} {{item?.user?.lastName}}</mat-label>
                  <mat-label class="font-size-12 weight-500 position-absolute" style="right: 10px; margin: 10px auto">
                    {{item?.createdAt | daysAgo}}
                  </mat-label>
                </div>
                <br>
                <div class="font-size-14 weight-700" style="min-height: 80px">
                  {{item?.question}}
                </div>
                <br>
                <div *ngIf="item?.score" class="d-inline-flex justify-content-between align-items-center m-1">
                  <div class="white-card p-1 d-flex align-items-center" style="width: fit-content">
                    <img src="assets/images/score.png"
                         width="16">
                    <mat-label class="font-size-12 weight-600"
                               style="margin: auto 5px">{{item?.score | parsInt}}
                      <mat-label class="font-size-12 weight-600 text-gray">Score</mat-label>
                    </mat-label>
                  </div>
                </div>
                <div class="d-inline-flex justify-content-between align-items-center m-1">
                  <div class="white-card p-1 d-flex align-items-center" style="width: fit-content">
                    <img
                      [src]="configService.url(item.category?.icon)"
                      width="16">
                    <mat-label class="font-size-12 weight-600"
                               style="margin: auto 5px">{{item?.category?.name}}</mat-label>
                  </div>
                </div>
                <br>
                <mat-card-actions class="position-relative d-flex align-items-center pb-0 pt-3">
                  <button mat-raised-button (click)="gotoAnswer(item)"
                          class="answer-button position-absolute end-10 bottom-0">{{'Answer' | translate}}
                  </button>
                  <div class="position-absolute bottom-0" style="display: contents">
                    <svg *ngIf="item?.liked" (click)="addLike(item)" width="17" height="17" viewBox="0 0 25 25"
                         fill="#0B6FEA"
                         xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M8.10205 18.5106L11.2021 20.9106C11.6021 21.3106 12.5021 21.5106 13.1021 21.5106H16.9021C18.1021 21.5106 19.4021 20.6106 19.7021 19.4106L22.1021 12.1106C22.6021 10.7106 21.7021 9.51061 20.2021 9.51061H16.2021C15.6021 9.51061 15.1021 9.01061 15.2021 8.31061L15.7021 5.11061C15.9021 4.21061 15.3021 3.21061 14.4021 2.91061C13.6021 2.61061 12.6021 3.01061 12.2021 3.61061L8.10205 9.71061"
                        stroke="#0B6FEA" stroke-width="1.5" stroke-miterlimit="10"/>
                      <path
                        d="M3.00195 18.5105V8.71055C3.00195 7.31055 3.60195 6.81055 5.00195 6.81055H6.00195C7.40195 6.81055 8.00195 7.31055 8.00195 8.71055V18.5105C8.00195 19.9105 7.40195 20.4105 6.00195 20.4105H5.00195C3.60195 20.4105 3.00195 19.9105 3.00195 18.5105Z"
                        stroke="#0B6FEA" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <svg *ngIf="!item?.liked" (click)="addLike(item)" width="17" height="17" viewBox="0 0 25 25"
                         fill="none"
                         xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M8.10205 18.5106L11.2021 20.9106C11.6021 21.3106 12.5021 21.5106 13.1021 21.5106H16.9021C18.1021 21.5106 19.4021 20.6106 19.7021 19.4106L22.1021 12.1106C22.6021 10.7106 21.7021 9.51061 20.2021 9.51061H16.2021C15.6021 9.51061 15.1021 9.01061 15.2021 8.31061L15.7021 5.11061C15.9021 4.21061 15.3021 3.21061 14.4021 2.91061C13.6021 2.61061 12.6021 3.01061 12.2021 3.61061L8.10205 9.71061"
                        stroke="#292D32" stroke-width="1.5" stroke-miterlimit="10"/>
                      <path
                        d="M3.00195 18.5105V8.71055C3.00195 7.31055 3.60195 6.81055 5.00195 6.81055H6.00195C7.40195 6.81055 8.00195 7.31055 8.00195 8.71055V18.5105C8.00195 19.9105 7.40195 20.4105 6.00195 20.4105H5.00195C3.60195 20.4105 3.00195 19.9105 3.00195 18.5105Z"
                        stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <mat-label [class]="{'link-text': item?.liked}">{{item?.likes}}</mat-label>
                    &nbsp;&nbsp;&nbsp;
                    <svg (click)="disLike(item)" *ngIf="item?.disliked" width="17" height="17" viewBox="0 0 25 25"
                         fill="#0B6FEA"
                         xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M17.4211 5.81055L14.3211 3.41055C13.9211 3.01055 13.0211 2.81055 12.4211 2.81055H8.6211C7.4211 2.81055 6.1211 3.71055 5.8211 4.91055L3.4211 12.2105C2.9211 13.6105 3.8211 14.8105 5.3211 14.8105H9.3211C9.9211 14.8105 10.4211 15.3105 10.3211 16.0105L9.8211 19.2105C9.6211 20.1105 10.2211 21.1105 11.1211 21.4105C11.9211 21.7105 12.9211 21.3105 13.3211 20.7105L17.4211 14.6105"
                        stroke="#0B6FEA" stroke-width="1.5" stroke-miterlimit="10"/>
                      <path
                        d="M22.521 5.81016V15.6102C22.521 17.0102 21.921 17.5102 20.521 17.5102H19.521C18.121 17.5102 17.521 17.0102 17.521 15.6102V5.81016C17.521 4.41016 18.121 3.91016 19.521 3.91016H20.521C21.921 3.91016 22.521 4.41016 22.521 5.81016Z"
                        stroke="#0B6FEA" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <svg (click)="disLike(item)" *ngIf="!item?.disliked" width="17" height="17" viewBox="0 0 25 25"
                         fill="none"
                         xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M17.4211 5.81055L14.3211 3.41055C13.9211 3.01055 13.0211 2.81055 12.4211 2.81055H8.6211C7.4211 2.81055 6.1211 3.71055 5.8211 4.91055L3.4211 12.2105C2.9211 13.6105 3.8211 14.8105 5.3211 14.8105H9.3211C9.9211 14.8105 10.4211 15.3105 10.3211 16.0105L9.8211 19.2105C9.6211 20.1105 10.2211 21.1105 11.1211 21.4105C11.9211 21.7105 12.9211 21.3105 13.3211 20.7105L17.4211 14.6105"
                        stroke="#292D32" stroke-width="1.5" stroke-miterlimit="10"/>
                      <path
                        d="M22.521 5.81016V15.6102C22.521 17.0102 21.921 17.5102 20.521 17.5102H19.521C18.121 17.5102 17.521 17.0102 17.521 15.6102V5.81016C17.521 4.41016 18.121 3.91016 19.521 3.91016H20.521C21.921 3.91016 22.521 4.41016 22.521 5.81016Z"
                        stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <mat-label [class]="{'link-text': item?.disliked}">{{item?.dislikes}}</mat-label>
                    &nbsp;&nbsp;&nbsp;
                    <div class="d-inline-flex">
                      <!--                      <star-rating show-half-stars="true" [starType]="'svg'"  [readOnly]="true" [rating]="item?.avgRate"></star-rating>-->
                      <ng-template #t let-fill="fill">
                        <i class="bi-star-fill">
                          @if (fill > 0) {
                          <i class="bi-star-fill filled" [style.width.%]="fill"></i>
                          }
                        </i>
                      </ng-template>

                      <ngb-rating [(rate)]="item.avgRate" [starTemplate]="t" [readonly]="true" [max]="5"/>
                    </div>
                    <div class="d-inline-flex text-gray">
                      <mat-label *ngIf="item?.avgRate">{{item?.avgRate | number}}</mat-label>
                      <mat-label *ngIf="item?.answers">({{item?.answers}})</mat-label>
                    </div>
                    &nbsp;&nbsp;&nbsp;
                    <svg (click)="addBookmark(item)" *ngIf="!item?.bookmarked" width="25" height="25"
                         viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M14.8477 11.4648H9.84766" stroke="#828282" stroke-width="1.2" stroke-miterlimit="10"
                            stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M12.3477 9.0249V14.0249" stroke="#828282" stroke-width="1.2" stroke-miterlimit="10"
                            stroke-linecap="round" stroke-linejoin="round"/>
                      <path
                        d="M17.168 2.81494H7.52797C5.39797 2.81494 3.66797 4.55494 3.66797 6.67494V20.7649C3.66797 22.5649 4.95797 23.3249 6.53797 22.4549L11.418 19.7449C11.938 19.4549 12.778 19.4549 13.288 19.7449L18.168 22.4549C19.748 23.3349 21.038 22.5749 21.038 20.7649V6.67494C21.028 4.55494 19.298 2.81494 17.168 2.81494Z"
                        stroke="#828282" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>

                    <svg (click)="removeBookmark(item)" *ngIf="item?.bookmarked" width="25" height="25"
                         viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M17.2188 2.81494H7.57875C5.44875 2.81494 3.71875 4.55494 3.71875 6.67494V20.7649C3.71875 22.5649 5.00875 23.3249 6.58875 22.4549L11.4688 19.7449C11.9888 19.4549 12.8287 19.4549 13.3387 19.7449L18.2188 22.4549C19.7987 23.3349 21.0888 22.5749 21.0888 20.7649V6.67494C21.0788 4.55494 19.3488 2.81494 17.2188 2.81494ZM14.8988 12.2149H9.89875C9.48875 12.2149 9.14875 11.8749 9.14875 11.4649C9.14875 11.0549 9.48875 10.7149 9.89875 10.7149H14.8988C15.3088 10.7149 15.6488 11.0549 15.6488 11.4649C15.6488 11.8749 15.3088 12.2149 14.8988 12.2149Z"
                        fill="#2C2523"/>
                    </svg>
                  </div>
                </mat-card-actions>

              </div>
              <div style="margin: 20px auto; text-align: center" *ngIf="libraryQuestions?.length > 0">
                <button mat-stroked-button color="primary" type="submit" *ngIf="!loadingMore && !noMoreItems"
                        class="p-4s ms-2 blue-button" (click)="showMore()"
                        style="min-width: 150px; border: 1px solid #0B6FEA">
                  <span>{{'More' | translate}}</span>
                </button>
                <mat-spinner style="margin: 0 auto; display: block; text-align: center" *ngIf="loadingMore"
                             [diameter]="20"></mat-spinner>
              </div>
            </mat-card-content>
            <br>
          </mat-card>
        </div>
      </div>
    </mat-tab>

    <mat-tab label="Games">
      <div class="card border-0">
        <div class="w-100 d-flex">
          <mat-card class="shadow-none p-2" style="width: 100%">
            <mat-card-header>
              <div>
                <mat-tab-group mat-stretch-tabs="false" mat-align-tabs="start" class="tab-group-library"
                               [(selectedIndex)]="selectedTabGameIndex" (selectedTabChange)="changeGames()">
                  <mat-tab label="All Games">
                  </mat-tab>
                  <mat-tab label="My Games">
                  </mat-tab>
                </mat-tab-group>
              </div>
            </mat-card-header>
            <br>
            <div class="d-flex overflow-scroll">
              <div class="m-2 d-inline-flex shadow-none cursor-pointer p-3"
                   (click)="selectCatGame('')"
                   [class]="{'mat-card-pref-selected': isSelected(''), 'mat-card-pref': !isSelected('')}">
                <div class="text-center w-100" style="padding-top: 8px">
                  <mat-label class="font-size-14 weight-600">{{ 'all categories' }}</mat-label>
                </div>
              </div>
              <div *ngFor="let cat of generalService?.clientInit?.categories"
                   class="m-2 d-inline-flex shadow-none cursor-pointer p-3"
                   (click)="selectCatGame(cat)"
                   [class]="{'mat-card-pref-selected': isSelected(cat), 'mat-card-pref': !isSelected(cat)}">
                <div class="text-start">
                  <img [src]="'https://api.staging.1qma.games/' + cat?.icon" width="35">
                  <mat-label>{{ cat?.name }}</mat-label>
                </div>
              </div>
            </div>
            <mat-card-content *ngIf="selectedTabGameIndex == 0">
              <div style="display: ruby-text;">
                <mat-spinner *ngIf="loadingContent" [diameter]="30"></mat-spinner>
              </div>
              <div>
                <div class="position-relative" *ngIf="gameData?.length > 0">
                  <button [matMenuTriggerFor]="menuSortGame"
                          class="font-size-14 weight-600 position-absolute end-10 top-0 border-0 bg-transparent d-flex align-items-center"
                          style="width: fit-content">
                    {{selectedSortOptionGame}}
                    <i class="bib bi-chevron-down color-black" style="padding: 10px"></i>
                  </button>
                  <mat-menu #menuSortGame="matMenu">
                    <div mat-menu-item class="p-2 border-bottom" (click)="onSelectGameSort('oldest')">
                      <mat-label>oldest</mat-label>
                    </div>
                    <div mat-menu-item class="p-2" (click)="onSelectGameSort('newest')">
                      <mat-label>newest</mat-label>
                    </div>
                  </mat-menu>
                </div>
                <br>
                <br>
                <mat-card *ngFor="let endedGame of gameData"
                          class="bordered-card shadow-none text-center d-inline-block">
                  <img [src]="'https://api.staging.1qma.games/' + endedGame?.category?.icon" width="50" height="50"
                       style="margin: 0 auto">
                  <mat-card-header style="margin: 0 auto; display: block">
                    <mat-card-title class="font-size-14 weight-700">{{ endedGame?.category?.name }}</mat-card-title>
                    <mat-card-subtitle class="font-size-12 weight-500">
                      {{endedGame?.endedAt | daysAgo}}
                    </mat-card-subtitle>
                  </mat-card-header>
                  <br>
                  <mat-card-content class="d-inline-flex position-relative p-0 w-100">
                    <mat-card class="shadow-none">
                      <mat-card-header class="pe-1 ps-1">
                        <img mat-card-avatar
                             [src]="endedGame?.creator?.profilePicture ? endedGame?.creator?.profilePicture?.startsWith('http') ? endedGame?.creator?.profilePicture : configService.url(endedGame?.creator?.profilePicture) : 'assets/images/frame.png'"
                             width="33" height="33" class="avatar-bordered bg-white mb-0">
                        <mat-card-title
                          class="font-size-10 weight-500 text-start p-1 text-gray">Created by:
                        </mat-card-title>
                        <mat-card-subtitle class="font-size-14 weight-500 text-start p-1" style="color: #2C2523">
                          {{endedGame?.creator?.firstName}} {{endedGame?.creator?.lastName}}
                        </mat-card-subtitle>
                      </mat-card-header>
                    </mat-card>
                  </mat-card-content>
                  <mat-divider></mat-divider>
                  <div class="position-relative">
                    <div class="font-size-14 weight-500 p-2 text-start">
                      <div *ngFor="let ply of endedGame?.players; let i=index" class="d-inline-block">
                        <img mat-card-avatar
                             [src]="ply?.profilePicture ? ply?.profilePicture?.startsWith('http') ? ply?.profilePicture : configService.url(ply?.profilePicture) : 'assets/images/frame.png'"
                             width="26" height="26"
                             class="avatar-bordered bg-white mb-0 position-absolute custom-position-{{i}}">
                      </div>
                    </div>
                    <div class="font-size-14 weight-500 p-2 text-end">
                 <span class="font-size-14 weight-500 position-absolute bottom-0"
                       style="right: 5px">{{endedGame?.gameType?.text}}</span>
                      <img src="assets/images/normal-game.png" *ngIf="endedGame?.gameType?.id == 'normal'" width="22"
                           height="22"
                           class="mb-0 position-absolute" style="top: 25px; right: 55px">
                      <img src="assets/images/survival-game.png" *ngIf="endedGame?.gameType?.id == 'survival'"
                           width="22" height="22"
                           class="mb-0 position-absolute" style="top: 25px; right: 55px">
                    </div>
                  </div>
                  <br>
                  <span
                    class="font-size-11 weight-500 text-start">{{endedGame?.players?.length}} {{'player' | translate}}</span>
                  <br>
                  <mat-card-actions>
                    <button mat-raised-button class="game-button"
                            (click)="gotoResult(endedGame._id)">{{'Game Detail' | translate}}
                    </button>
                  </mat-card-actions>
                </mat-card>
              </div>
            </mat-card-content>

            <mat-card-content *ngIf="selectedTabGameIndex == 1">
              <div style="display: ruby-text;">
                <mat-spinner *ngIf="loadingContent" [diameter]="30"></mat-spinner>
              </div>
              <div class="position-relative" *ngIf="gameData?.length > 0">
                <button [matMenuTriggerFor]="menuSortGame"
                        class="font-size-14 weight-600 position-absolute end-10 top-0 border-0 bg-transparent d-flex align-items-center"
                        style="width: fit-content">
                  {{selectedSortOptionGame}}
                  <i class="bib bi-chevron-down color-black" style="padding: 10px"></i>
                </button>
                <mat-menu #menuSortGame="matMenu">
                  <div mat-menu-item class="p-2 border-bottom" (click)="onSelectGameSort('oldest')">
                    <mat-label>oldest</mat-label>
                  </div>
                  <div mat-menu-item class="p-2" (click)="onSelectGameSort('newest')">
                    <mat-label>newest</mat-label>
                  </div>
                </mat-menu>
              </div>
              <br>
              <br>
              <div class="">
                <mat-card *ngFor="let endedGame of gameData"
                          class="bordered-card shadow-none text-center d-inline-block">
                  <img [src]="'https://api.staging.1qma.games/' + endedGame?.category?.icon" width="50" height="50"
                       style="margin: 0 auto">
                  <mat-card-header style="margin: 0 auto; display: block">
                    <mat-card-title class="font-size-14 weight-700">{{ endedGame?.category?.name }}</mat-card-title>
                    <mat-card-subtitle class="font-size-12 weight-500">
                      {{endedGame?.endedAt | daysAgo}}
                    </mat-card-subtitle>
                  </mat-card-header>
                  <br>
                  <mat-card-content class="d-inline-flex position-relative p-0">
                    <mat-card class="shadow-none">
                      <mat-card-header class="pe-1 ps-1">
                        <img mat-card-avatar
                             [src]="endedGame?.creator?.profilePicture ? endedGame?.creator?.profilePicture?.startsWith('http') ? endedGame?.creator?.profilePicture : configService.url(endedGame?.creator?.profilePicture) : 'assets/images/frame.png'"
                             width="33" height="33" class="avatar-bordered bg-white mb-0">
                        <mat-card-title
                          class="font-size-14 weight-500 text-start">{{endedGame?.creator?.firstName}} {{endedGame?.creator?.lastName}}</mat-card-title>
                        <mat-card-subtitle class="text-start ps-0">
                          <img src="assets/images/rank.png" width="16"><span
                          class="font-size-14 weight-700">{{endedGame?.rank}} </span><span
                          class="font-size-14 weight-500"> {{'Rank' | translate}}</span>
                          <img src="assets/images/score.png" width="16"><span
                          class="font-size-14 weight-700">{{endedGame?.score | parsInt}} </span><span
                          class="font-size-14 weight-500"> {{'Score' | translate}}</span>
                        </mat-card-subtitle>
                      </mat-card-header>
                    </mat-card>
                  </mat-card-content>
                  <mat-divider></mat-divider>
                  <div class="position-relative">
                    <div class="font-size-14 weight-500 p-2 text-start">
                      <div *ngFor="let ply of endedGame?.players; let i=index" class="d-inline-block">
                        <img mat-card-avatar
                             [src]="ply?.profilePicture ? ply?.profilePicture?.startsWith('http') ? ply?.profilePicture : configService.url(ply?.profilePicture) : 'assets/images/frame.png'"
                             width="26" height="26"
                             class="bg-white avatar-bordered mb-0 position-absolute custom-position-{{i}}">
                      </div>
                    </div>
                    <div class="font-size-14 weight-500 p-2 text-end">
                 <span class="font-size-14 weight-500 position-absolute bottom-0"
                       style="right: 5px">{{endedGame?.gameType?.text}}</span>
                      <img src="assets/images/normal-game.png" *ngIf="endedGame?.gameType?.id == 'normal'" width="22"
                           height="22"
                           class="mb-0 position-absolute" style="top: 25px; right: 55px">
                      <img src="assets/images/survival-game.png" *ngIf="endedGame?.gameType?.id == 'survival'"
                           width="22" height="22"
                           class="mb-0 position-absolute" style="top: 25px; right: 55px">
                    </div>
                  </div>
                  <br>
                  <span
                    class="font-size-11 weight-500 text-start">{{endedGame?.players?.length}} {{'player' | translate}}</span>
                  <br>
                  <mat-card-actions>
                    <button mat-raised-button class="game-button"
                            (click)="gotoResult(endedGame._id)">{{'Game Detail' | translate}}
                    </button>
                  </mat-card-actions>
                </mat-card>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
    </mat-tab>
  </mat-tab-group>
</div>

<div *ngIf="!loading && questionStep == 2">
  <div class="card border-0">
    <div class="w-100 d-flex">
      <mat-card class="shadow-none">
        <mat-card-header>
          <img src="assets/images/arrow-left.svg" width="24" height="24" (click)="questionStep = 1"
               style="position: absolute; left: 10px; top: 0; bottom: 0; margin: auto;">
          <div class="ms-2" style="height: 46px"></div>
          <mat-label class="font-size-16 weight-600 ms-4">{{'Question Detail' | translate}}</mat-label>
        </mat-card-header>
      </mat-card>
    </div>
  </div>
  <br>
  <div class="card border-0">
    <mat-card class="shadow-none radius">
      <mat-card-content>
        <div class="p-4 m-2 d-inline-block" style="width: 98%">
          <div class="d-flex white-card position-relative w-25 p-1" style="background: #F9F7F7">
            <img class="avatar-bordered"
                 [src]="questionDetail?.user?.profilePicture ? questionDetail?.user?.profilePicture?.startsWith('http') ? questionDetail?.user?.profilePicture : configService.url(questionDetail?.user?.profilePicture) : 'assets/images/frame.png'"
                 width="42" height="42">
            <mat-label class="font-size-13 weight-500"
                       style="margin: auto 10px">{{questionDetail?.user?.firstName}} {{questionDetail?.user?.lastName}}</mat-label>
            <mat-label class="font-size-12 weight-500 position-absolute" style="right: 10px; margin: 10px auto">
              {{questionDetail?.createdAt | daysAgo}}
            </mat-label>
          </div>
          <div class="position-absolute" style="top: 50px; right: 50px">
            <div class="p-1" style="width: fit-content">
              <img
                [src]="configService.url(questionDetail?.category?.icon)"
                width="16">
              <mat-label class="font-size-12 weight-600"
                         style="margin: auto 5px">{{questionDetail?.category?.name}}</mat-label>
            </div>
          </div>
          <br>
          <svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M17.8408 18.5899H13.8408L9.39081 21.5499C8.73081 21.9899 7.84082 21.5199 7.84082 20.7199V18.5899C4.84082 18.5899 2.84082 16.5899 2.84082 13.5899V7.58984C2.84082 4.58984 4.84082 2.58984 7.84082 2.58984H17.8408C20.8408 2.58984 22.8408 4.58984 22.8408 7.58984V13.5899C22.8408 16.5899 20.8408 18.5899 17.8408 18.5899Z"
              stroke="#292D32" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"
              stroke-linejoin="round"/>
            <path
              d="M12.8406 11.5205V11.3105C12.8406 10.6305 13.2607 10.2705 13.6807 9.98053C14.0907 9.70053 14.5006 9.34054 14.5006 8.68054C14.5006 7.76054 13.7606 7.02051 12.8406 7.02051C11.9206 7.02051 11.1807 7.76054 11.1807 8.68054"
              stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M12.8363 13.9102H12.8453" stroke="#292D32" stroke-width="1.5" stroke-linecap="round"
                  stroke-linejoin="round"/>
          </svg>
          {{'Question' | translate}}:
          <br>
          <br>
          <div class="font-size-14 weight-700">
            {{questionDetail?.question}}
          </div>
          <br>
          <mat-card-actions class="position-relative d-flex align-items-center">
            <div class="w-50 position-absolute bottom-0 d-flex align-items-center">
              <svg *ngIf="questionDetail?.liked" (click)="addLike(questionDetail)" width="17" height="17"
                   viewBox="0 0 25 25"
                   fill="#0B6FEA"
                   xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M8.10205 18.5106L11.2021 20.9106C11.6021 21.3106 12.5021 21.5106 13.1021 21.5106H16.9021C18.1021 21.5106 19.4021 20.6106 19.7021 19.4106L22.1021 12.1106C22.6021 10.7106 21.7021 9.51061 20.2021 9.51061H16.2021C15.6021 9.51061 15.1021 9.01061 15.2021 8.31061L15.7021 5.11061C15.9021 4.21061 15.3021 3.21061 14.4021 2.91061C13.6021 2.61061 12.6021 3.01061 12.2021 3.61061L8.10205 9.71061"
                  stroke="#0B6FEA" stroke-width="1.5" stroke-miterlimit="10"/>
                <path
                  d="M3.00195 18.5105V8.71055C3.00195 7.31055 3.60195 6.81055 5.00195 6.81055H6.00195C7.40195 6.81055 8.00195 7.31055 8.00195 8.71055V18.5105C8.00195 19.9105 7.40195 20.4105 6.00195 20.4105H5.00195C3.60195 20.4105 3.00195 19.9105 3.00195 18.5105Z"
                  stroke="#0B6FEA" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <svg *ngIf="!questionDetail?.liked" (click)="addLike(questionDetail)" width="17" height="17"
                   viewBox="0 0 25 25"
                   fill="none"
                   xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M8.10205 18.5106L11.2021 20.9106C11.6021 21.3106 12.5021 21.5106 13.1021 21.5106H16.9021C18.1021 21.5106 19.4021 20.6106 19.7021 19.4106L22.1021 12.1106C22.6021 10.7106 21.7021 9.51061 20.2021 9.51061H16.2021C15.6021 9.51061 15.1021 9.01061 15.2021 8.31061L15.7021 5.11061C15.9021 4.21061 15.3021 3.21061 14.4021 2.91061C13.6021 2.61061 12.6021 3.01061 12.2021 3.61061L8.10205 9.71061"
                  stroke="#292D32" stroke-width="1.5" stroke-miterlimit="10"/>
                <path
                  d="M3.00195 18.5105V8.71055C3.00195 7.31055 3.60195 6.81055 5.00195 6.81055H6.00195C7.40195 6.81055 8.00195 7.31055 8.00195 8.71055V18.5105C8.00195 19.9105 7.40195 20.4105 6.00195 20.4105H5.00195C3.60195 20.4105 3.00195 19.9105 3.00195 18.5105Z"
                  stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <mat-label [class]="{'link-text': questionDetail?.liked}">{{questionDetail?.likes}}</mat-label>
              &nbsp;&nbsp;&nbsp;
              <svg (click)="disLike(questionDetail)" *ngIf="questionDetail?.disliked" width="17" height="17"
                   viewBox="0 0 25 25"
                   fill="#0B6FEA"
                   xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M17.4211 5.81055L14.3211 3.41055C13.9211 3.01055 13.0211 2.81055 12.4211 2.81055H8.6211C7.4211 2.81055 6.1211 3.71055 5.8211 4.91055L3.4211 12.2105C2.9211 13.6105 3.8211 14.8105 5.3211 14.8105H9.3211C9.9211 14.8105 10.4211 15.3105 10.3211 16.0105L9.8211 19.2105C9.6211 20.1105 10.2211 21.1105 11.1211 21.4105C11.9211 21.7105 12.9211 21.3105 13.3211 20.7105L17.4211 14.6105"
                  stroke="#0B6FEA" stroke-width="1.5" stroke-miterlimit="10"/>
                <path
                  d="M22.521 5.81016V15.6102C22.521 17.0102 21.921 17.5102 20.521 17.5102H19.521C18.121 17.5102 17.521 17.0102 17.521 15.6102V5.81016C17.521 4.41016 18.121 3.91016 19.521 3.91016H20.521C21.921 3.91016 22.521 4.41016 22.521 5.81016Z"
                  stroke="#0B6FEA" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <svg (click)="disLike(questionDetail)" *ngIf="!questionDetail?.disliked" width="17" height="17"
                   viewBox="0 0 25 25"
                   fill="none"
                   xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M17.4211 5.81055L14.3211 3.41055C13.9211 3.01055 13.0211 2.81055 12.4211 2.81055H8.6211C7.4211 2.81055 6.1211 3.71055 5.8211 4.91055L3.4211 12.2105C2.9211 13.6105 3.8211 14.8105 5.3211 14.8105H9.3211C9.9211 14.8105 10.4211 15.3105 10.3211 16.0105L9.8211 19.2105C9.6211 20.1105 10.2211 21.1105 11.1211 21.4105C11.9211 21.7105 12.9211 21.3105 13.3211 20.7105L17.4211 14.6105"
                  stroke="#292D32" stroke-width="1.5" stroke-miterlimit="10"/>
                <path
                  d="M22.521 5.81016V15.6102C22.521 17.0102 21.921 17.5102 20.521 17.5102H19.521C18.121 17.5102 17.521 17.0102 17.521 15.6102V5.81016C17.521 4.41016 18.121 3.91016 19.521 3.91016H20.521C21.921 3.91016 22.521 4.41016 22.521 5.81016Z"
                  stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <mat-label [class]="{'link-text': questionDetail?.disliked}">{{questionDetail?.dislikes}}</mat-label>
              &nbsp;&nbsp;&nbsp;
              <div class="d-inline-flex">
                <!--                <star-rating show-half-stars="true" [starType]="'svg'" [rating]="questionDetail?.avgRate" [readOnly]="true"></star-rating>-->
                <ng-template #t let-fill="fill">
                  <i class="bi-star-fill">
                    @if (fill > 0) {
                    <i class="bi-star-fill filled" [style.width.%]="fill"></i>
                    }
                  </i>
                </ng-template>

                <ngb-rating [(rate)]="questionDetail.avgRate" [starTemplate]="t" [readonly]="true" [max]="5"/>
              </div>
              <div class="d-inline-flex text-gray">
                <mat-label *ngIf="questionDetail?.avgRate">{{questionDetail?.avgRate | number}}</mat-label>
                <mat-label *ngIf="questionDetail?.answers">({{questionDetail?.answers}})</mat-label>
              </div>
              &nbsp;&nbsp;&nbsp;
              <svg (click)="addBookmark(questionDetail)" *ngIf="!questionDetail?.bookmarked" width="25" height="25"
                   viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M14.8477 11.4648H9.84766" stroke="#828282" stroke-width="1.2" stroke-miterlimit="10"
                      stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M12.3477 9.0249V14.0249" stroke="#828282" stroke-width="1.2" stroke-miterlimit="10"
                      stroke-linecap="round" stroke-linejoin="round"/>
                <path
                  d="M17.168 2.81494H7.52797C5.39797 2.81494 3.66797 4.55494 3.66797 6.67494V20.7649C3.66797 22.5649 4.95797 23.3249 6.53797 22.4549L11.418 19.7449C11.938 19.4549 12.778 19.4549 13.288 19.7449L18.168 22.4549C19.748 23.3349 21.038 22.5749 21.038 20.7649V6.67494C21.028 4.55494 19.298 2.81494 17.168 2.81494Z"
                  stroke="#828282" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>

              <svg (click)="removeBookmark(questionDetail)" *ngIf="questionDetail?.bookmarked" width="25" height="25"
                   viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M17.2188 2.81494H7.57875C5.44875 2.81494 3.71875 4.55494 3.71875 6.67494V20.7649C3.71875 22.5649 5.00875 23.3249 6.58875 22.4549L11.4688 19.7449C11.9888 19.4549 12.8287 19.4549 13.3387 19.7449L18.2188 22.4549C19.7987 23.3349 21.0888 22.5749 21.0888 20.7649V6.67494C21.0788 4.55494 19.3488 2.81494 17.2188 2.81494ZM14.8988 12.2149H9.89875C9.48875 12.2149 9.14875 11.8749 9.14875 11.4649C9.14875 11.0549 9.48875 10.7149 9.89875 10.7149H14.8988C15.3088 10.7149 15.6488 11.0549 15.6488 11.4649C15.6488 11.8749 15.3088 12.2149 14.8988 12.2149Z"
                  fill="#2C2523"/>
              </svg>
              <div class="position-absolute end-0 bottom-0">
                <mat-label>{{questionDetail?.createdAt | date}}</mat-label>
              </div>
            </div>

            <div class="w-50 position-absolute bottom-0 end-0 text-end">
              <div class="d-inline-flex justify-content-between align-items-center m-1">
                <div class="p-1 d-flex align-items-center" style="width: fit-content">
                  <img src="assets/images/score.png"
                       width="16">
                  <mat-label class="font-size-12 weight-600"
                             style="margin: auto 5px">{{questionDetail?.score | parsInt}}
                    <mat-label class="font-size-12 weight-600 text-gray">{{'Score' | translate}}</mat-label>
                  </mat-label>
                </div>
              </div>
              <div class="d-inline-flex justify-content-between align-items-center m-1">
                <div class="p-1 d-flex align-items-center" style="width: fit-content">
                  <img src="assets/images/plays.png"
                       width="16">
                  <mat-label class="font-size-12 weight-600"
                             style="margin: auto 5px">{{questionDetail?.plays | parsInt}}
                    <mat-label class="font-size-12 weight-600 text-gray">{{'Plays' | translate}}</mat-label>
                  </mat-label>
                </div>
              </div>
              <div class="d-inline-flex justify-content-between align-items-center m-1">
                <div class="p-1 d-flex align-items-center" style="width: fit-content">
                  <img src="assets/images/answer-questions.png"
                       width="16">
                  <mat-label class="font-size-12 weight-600"
                             style="margin: auto 5px">{{questionDetail?.answers | parsInt}}
                    <mat-label class="font-size-12 weight-600 text-gray">{{'Answers' | translate}}</mat-label>
                  </mat-label>
                </div>
              </div>
            </div>
          </mat-card-actions>
          <br>
          <br>
          <div *ngIf="question">
            <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M7.9917 12.3604H14.9917" stroke="#292D32" stroke-width="1.5" stroke-miterlimit="10"
                    stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M7.9917 16.3604H12.3717" stroke="#292D32" stroke-width="1.5" stroke-miterlimit="10"
                    stroke-linecap="round" stroke-linejoin="round"/>
              <path
                d="M9.9917 6.16016H13.9917C15.9917 6.16016 15.9917 5.16016 15.9917 4.16016C15.9917 2.16016 14.9917 2.16016 13.9917 2.16016H9.9917C8.9917 2.16016 7.9917 2.16016 7.9917 4.16016C7.9917 6.16016 8.9917 6.16016 9.9917 6.16016Z"
                stroke="#292D32" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"
                stroke-linejoin="round"/>
              <path
                d="M15.9917 4.17969C19.3217 4.35969 20.9917 5.58969 20.9917 10.1597V16.1597C20.9917 20.1597 19.9917 22.1597 14.9917 22.1597H8.9917C3.9917 22.1597 2.9917 20.1597 2.9917 16.1597V10.1597C2.9917 5.59969 4.6617 4.35969 7.9917 4.17969"
                stroke="#292D32" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"
                stroke-linejoin="round"/>
            </svg>
            {{'Answer' | translate}}:
            <br>
            <br>
            <div class="font-size-14 weight-700">
              {{questionDetail?.answer}}
            </div>
          </div>
          <br>
          <!--          <mat-card-actions class="position-relative">-->
          <!--            <div class="w-50 position-absolute bottom-0">-->
          <!--              <svg width="17" height="17" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">-->
          <!--                <path-->
          <!--                  d="M8.10205 18.5106L11.2021 20.9106C11.6021 21.3106 12.5021 21.5106 13.1021 21.5106H16.9021C18.1021 21.5106 19.4021 20.6106 19.7021 19.4106L22.1021 12.1106C22.6021 10.7106 21.7021 9.51061 20.2021 9.51061H16.2021C15.6021 9.51061 15.1021 9.01061 15.2021 8.31061L15.7021 5.11061C15.9021 4.21061 15.3021 3.21061 14.4021 2.91061C13.6021 2.61061 12.6021 3.01061 12.2021 3.61061L8.10205 9.71061"-->
          <!--                  stroke="#292D32" stroke-width="1.5" stroke-miterlimit="10"/>-->
          <!--                <path-->
          <!--                  d="M3.00195 18.5105V8.71055C3.00195 7.31055 3.60195 6.81055 5.00195 6.81055H6.00195C7.40195 6.81055 8.00195 7.31055 8.00195 8.71055V18.5105C8.00195 19.9105 7.40195 20.4105 6.00195 20.4105H5.00195C3.60195 20.4105 3.00195 19.9105 3.00195 18.5105Z"-->
          <!--                  stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>-->
          <!--              </svg>&nbsp;{{questionDetail?.likes}}-->
          <!--              &nbsp;&nbsp;&nbsp;<svg width="17" height="17" viewBox="0 0 25 25" fill="none"-->
          <!--                                     xmlns="http://www.w3.org/2000/svg">-->
          <!--              <path-->
          <!--                d="M17.4211 5.81055L14.3211 3.41055C13.9211 3.01055 13.0211 2.81055 12.4211 2.81055H8.6211C7.4211 2.81055 6.1211 3.71055 5.8211 4.91055L3.4211 12.2105C2.9211 13.6105 3.8211 14.8105 5.3211 14.8105H9.3211C9.9211 14.8105 10.4211 15.3105 10.3211 16.0105L9.8211 19.2105C9.6211 20.1105 10.2211 21.1105 11.1211 21.4105C11.9211 21.7105 12.9211 21.3105 13.3211 20.7105L17.4211 14.6105"-->
          <!--                stroke="#292D32" stroke-width="1.5" stroke-miterlimit="10"/>-->
          <!--              <path-->
          <!--                d="M22.521 5.81016V15.6102C22.521 17.0102 21.921 17.5102 20.521 17.5102H19.521C18.121 17.5102 17.521 17.0102 17.521 15.6102V5.81016C17.521 4.41016 18.121 3.91016 19.521 3.91016H20.521C21.921 3.91016 22.521 4.41016 22.521 5.81016Z"-->
          <!--                stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>-->
          <!--            </svg>-->
          <!--              &nbsp;{{questionDetail?.dislikes}}-->
          <!--              &nbsp;&nbsp;&nbsp;<svg width="17" height="17" viewBox="0 0 17 17" fill="none"-->
          <!--                                     xmlns="http://www.w3.org/2000/svg">-->
          <!--              <path d="M10.0384 7.65576H6.83008" stroke="#828282" stroke-width="1.2" stroke-miterlimit="10"-->
          <!--                    stroke-linecap="round" stroke-linejoin="round"/>-->
          <!--              <path d="M8.4342 6.07275V9.317" stroke="#828282" stroke-width="1.2" stroke-miterlimit="10"-->
          <!--                    stroke-linecap="round" stroke-linejoin="round"/>-->
          <!--              <path-->
          <!--                d="M11.5271 2.04346H5.34146C3.97471 2.04346 2.86462 3.17246 2.86462 4.54802V13.6903C2.86462 14.8582 3.69237 15.3514 4.70621 14.7869L7.83754 13.0285C8.17121 12.8403 8.7102 12.8403 9.03745 13.0285L12.1688 14.7869C13.1826 15.3579 14.0104 14.8647 14.0104 13.6903V4.54802C14.004 3.17246 12.8939 2.04346 11.5271 2.04346Z"-->
          <!--                stroke="#828282" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>-->
          <!--            </svg>-->
          <!--              &nbsp;{{questionDetail?.bookmarks}}-->
          <!--              <div class="position-absolute end-0 bottom-0">-->
          <!--                <mat-label>{{questionDetail?.createdAt | date}}</mat-label>-->
          <!--              </div>-->
          <!--            </div>-->

          <!--            <div class="w-50 position-absolute bottom-0 end-0 text-end">-->
          <!--              <div class="d-inline-flex justify-content-between align-items-center m-1">-->
          <!--                <div class="p-1" style="width: fit-content">-->
          <!--                  <img src="assets/images/score.png"-->
          <!--                       width="24">-->
          <!--                  <mat-label class="font-size-12 weight-600"-->
          <!--                             style="margin: auto 5px">{{questionDetail?.score | parsInt}}-->
          <!--                    <mat-label class="font-size-12 weight-600" style="color: #828282">Score</mat-label>-->
          <!--                  </mat-label>-->
          <!--                </div>-->
          <!--              </div>-->
          <!--              <div class="d-inline-flex justify-content-between align-items-center m-1">-->
          <!--                <div class="p-1" style="width: fit-content">-->
          <!--                  <img src="assets/images/plays.png"-->
          <!--                       width="24">-->
          <!--                  <mat-label class="font-size-12 weight-600"-->
          <!--                             style="margin: auto 5px">{{questionDetail?.plays | parsInt}}-->
          <!--                    <mat-label class="font-size-12 weight-600" style="color: #828282">Plays</mat-label>-->
          <!--                  </mat-label>-->
          <!--                </div>-->
          <!--              </div>-->
          <!--              <div class="d-inline-flex justify-content-between align-items-center m-1">-->
          <!--                <div class="p-1" style="width: fit-content">-->
          <!--                  <img src="assets/images/answer-questions.png"-->
          <!--                       width="24">-->
          <!--                  <mat-label class="font-size-12 weight-600"-->
          <!--                             style="margin: auto 5px">{{questionDetail?.answers | parsInt}}-->
          <!--                    <mat-label class="font-size-12 weight-600" style="color: #828282">Answers</mat-label>-->
          <!--                  </mat-label>-->
          <!--                </div>-->
          <!--              </div>-->
          <!--            </div>-->
          <!--          </mat-card-actions>-->
        </div>

      </mat-card-content>
    </mat-card>
  </div>
  <br>
  <mat-label *ngIf="performance" class="font-size-16 weight-600 ms-4">{{'Performance in games' | translate}}</mat-label>
  <br>
  <br>
  <div *ngFor="let perf of performance">
    <div class="card border-0">
      <mat-card class="shadow-none radius">
        <mat-card-content>
          <div class="p-4 d-inline-block" style="width: 98%">
            <div class="d-flex border-bottom position-relative pb-4">
              <div class="white-card p-2 m-1 d-flex align-items-center"
                   style="background: #F9F7F7">{{perf?.endedAt | daysAgo}}</div>
              <div class="white-card p-2 m-1 d-flex align-items-center" style="background: #F9F7F7">
                <img src="assets/images/score.png" width="16" height="16">
                <mat-label class="font-size-14 weight-700"
                           style="color: #585858">{{perf?.question?.rate | parsInt}} </mat-label>
                {{'Question Score' | translate}}
              </div>
              <div class="position-absolute end-10 cursor-pointer" style="color: #0B6FEA; bottom: 1.5rem"
                   (click)="gotoResult(perf._id)">
                {{'Game Detail' | translate}}&nbsp;
                <svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M9.53223 20.4084L16.0522 13.8884C16.8222 13.1184 16.8222 11.8584 16.0522 11.0884L9.53223 4.56836"
                    stroke="#0B6FEA" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"
                    stroke-linejoin="round"/>
                </svg>
              </div>
            </div>
            <div class="container-accordion">
              <div class="container-accordion-item" *ngFor="let answer of perf?.question?.answers">
                <img class="avatar-bordered bg-white"
                     [src]="answer?.player?.profilePicture ? answer?.player?.profilePicture?.startsWith('http') ? answer?.player?.profilePicture : configService.url(answer?.player?.profilePicture) : 'assets/images/frame.png'"
                     width="40" height="40">
                &nbsp;<span
                class="font-size-14 weight-700 pe-2">{{answer?.player?.firstName}} {{answer?.player?.lastName}}</span>
                <br>
                <br>
                <mat-label class="font-size-14 weight-400">{{answer?.answer}}</mat-label>
                <br>
                <br>
                <mat-card-actions class="position-relative">
                  <div class="position-absolute end-0 bottom-0 d-flex align-items-center" style="width: fit-content;">
                    <img src="assets/images/score.png" width="16" height="16">
                    &nbsp;<mat-label class="font-size-14 weight-500 vertical-middle">{{answer?.rate | parsInt}} Score
                  </mat-label>
                  </div>
                  <div class="position-absolute bottom-0 d-flex align-items-center">
                    <svg *ngIf="answer?.liked" (click)="addLike(answer)" width="17" height="17" viewBox="0 0 25 25"
                         fill="#0B6FEA"
                         xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M8.10205 18.5106L11.2021 20.9106C11.6021 21.3106 12.5021 21.5106 13.1021 21.5106H16.9021C18.1021 21.5106 19.4021 20.6106 19.7021 19.4106L22.1021 12.1106C22.6021 10.7106 21.7021 9.51061 20.2021 9.51061H16.2021C15.6021 9.51061 15.1021 9.01061 15.2021 8.31061L15.7021 5.11061C15.9021 4.21061 15.3021 3.21061 14.4021 2.91061C13.6021 2.61061 12.6021 3.01061 12.2021 3.61061L8.10205 9.71061"
                        stroke="#0B6FEA" stroke-width="1.5" stroke-miterlimit="10"/>
                      <path
                        d="M3.00195 18.5105V8.71055C3.00195 7.31055 3.60195 6.81055 5.00195 6.81055H6.00195C7.40195 6.81055 8.00195 7.31055 8.00195 8.71055V18.5105C8.00195 19.9105 7.40195 20.4105 6.00195 20.4105H5.00195C3.60195 20.4105 3.00195 19.9105 3.00195 18.5105Z"
                        stroke="#0B6FEA" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <svg *ngIf="!answer?.liked" (click)="addLike(answer)" width="17" height="17" viewBox="0 0 25 25"
                         fill="none"
                         xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M8.10205 18.5106L11.2021 20.9106C11.6021 21.3106 12.5021 21.5106 13.1021 21.5106H16.9021C18.1021 21.5106 19.4021 20.6106 19.7021 19.4106L22.1021 12.1106C22.6021 10.7106 21.7021 9.51061 20.2021 9.51061H16.2021C15.6021 9.51061 15.1021 9.01061 15.2021 8.31061L15.7021 5.11061C15.9021 4.21061 15.3021 3.21061 14.4021 2.91061C13.6021 2.61061 12.6021 3.01061 12.2021 3.61061L8.10205 9.71061"
                        stroke="#292D32" stroke-width="1.5" stroke-miterlimit="10"/>
                      <path
                        d="M3.00195 18.5105V8.71055C3.00195 7.31055 3.60195 6.81055 5.00195 6.81055H6.00195C7.40195 6.81055 8.00195 7.31055 8.00195 8.71055V18.5105C8.00195 19.9105 7.40195 20.4105 6.00195 20.4105H5.00195C3.60195 20.4105 3.00195 19.9105 3.00195 18.5105Z"
                        stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <mat-label [class]="{'link-text': answer?.liked}">{{answer?.likes}}</mat-label>
                    &nbsp;&nbsp;&nbsp;
                    <svg (click)="disLike(answer)" *ngIf="answer?.disliked" width="17" height="17" viewBox="0 0 25 25"
                         fill="#0B6FEA"
                         xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M17.4211 5.81055L14.3211 3.41055C13.9211 3.01055 13.0211 2.81055 12.4211 2.81055H8.6211C7.4211 2.81055 6.1211 3.71055 5.8211 4.91055L3.4211 12.2105C2.9211 13.6105 3.8211 14.8105 5.3211 14.8105H9.3211C9.9211 14.8105 10.4211 15.3105 10.3211 16.0105L9.8211 19.2105C9.6211 20.1105 10.2211 21.1105 11.1211 21.4105C11.9211 21.7105 12.9211 21.3105 13.3211 20.7105L17.4211 14.6105"
                        stroke="#0B6FEA" stroke-width="1.5" stroke-miterlimit="10"/>
                      <path
                        d="M22.521 5.81016V15.6102C22.521 17.0102 21.921 17.5102 20.521 17.5102H19.521C18.121 17.5102 17.521 17.0102 17.521 15.6102V5.81016C17.521 4.41016 18.121 3.91016 19.521 3.91016H20.521C21.921 3.91016 22.521 4.41016 22.521 5.81016Z"
                        stroke="#0B6FEA" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <svg (click)="disLike(answer)" *ngIf="!answer?.disliked" width="17" height="17" viewBox="0 0 25 25"
                         fill="none"
                         xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M17.4211 5.81055L14.3211 3.41055C13.9211 3.01055 13.0211 2.81055 12.4211 2.81055H8.6211C7.4211 2.81055 6.1211 3.71055 5.8211 4.91055L3.4211 12.2105C2.9211 13.6105 3.8211 14.8105 5.3211 14.8105H9.3211C9.9211 14.8105 10.4211 15.3105 10.3211 16.0105L9.8211 19.2105C9.6211 20.1105 10.2211 21.1105 11.1211 21.4105C11.9211 21.7105 12.9211 21.3105 13.3211 20.7105L17.4211 14.6105"
                        stroke="#292D32" stroke-width="1.5" stroke-miterlimit="10"/>
                      <path
                        d="M22.521 5.81016V15.6102C22.521 17.0102 21.921 17.5102 20.521 17.5102H19.521C18.121 17.5102 17.521 17.0102 17.521 15.6102V5.81016C17.521 4.41016 18.121 3.91016 19.521 3.91016H20.521C21.921 3.91016 22.521 4.41016 22.521 5.81016Z"
                        stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <mat-label [class]="{'link-text': answer?.disliked}">{{answer?.dislikes}}</mat-label>
                    &nbsp;&nbsp;&nbsp;
                    <div class="d-inline-flex">
                      <!--                      <star-rating show-half-stars="true" [starType]="'svg'" [rating]="answer?.avgRate" [readOnly]="true"></star-rating>-->
                      <ng-template #t let-fill="fill">
                        <i class="bi-star-fill">
                          @if (fill > 0) {
                          <i class="bi-star-fill filled" [style.width.%]="fill"></i>
                          }
                        </i>
                      </ng-template>

                      <ngb-rating [(rate)]="answer.avgRate" [starTemplate]="t" [readonly]="true" [max]="5"/>
                    </div>
                    <div class="d-inline-flex text-gray">
                      <mat-label *ngIf="answer?.avgRate">{{answer?.avgRate | number}}</mat-label>
                      <mat-label *ngIf="answer?.answers">({{answer?.answers}})</mat-label>
                    </div>
                  </div>
                </mat-card-actions>
              </div>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
    <br>
  </div>
  <br>
</div>
